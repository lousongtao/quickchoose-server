<!DOCTYPE html>

<!-- Auto Generated with Sencha Architect -->
<!-- Modifications to this file will be overwritten. -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test Tree</title>
    <script src="extjs/ext-all-dev.js"></script>
    <script src="extjs/ext-theme-neptune.js"></script>
    <link rel="stylesheet" href="extjs/resources/ext-theme-neptune/ext-theme-neptune-all.css">
    <script type="text/javascript">
		Ext.onReady(function(){
			/*
			var store1 = Ext.create('Ext.data.TreeStore', {
				root: {
					expanded: true,
					children: [
						{ chineseName: "detentioncn", text: "detention",leaf: true },
						{ chineseName: "homeworkcn", text: "detention",expanded: true, children: [
							{ chineseName: "book reportcn", text: "detention",leaf: true },
							{ chineseName: "algebracn", text: "detention",leaf: true}
						] },
						{ chineseName: "buy lottery ticketscn", text: "detention",leaf: true }
					]
				}
			});

			var tree_localstore = Ext.create('Ext.tree.Panel', {
				title: 'local store',
				width: 300,
				height: 440,
				//displayField: 'chineseName',
				store: store1,
				renderTo: Ext.getBody()
			});
			*/
			
			var store2 = Ext.create('Ext.data.TreeStore', {
				autoLoad: false,
				storeId: 'CategoryTreeStore',
				
				root: {
					chineseName: 'Menu',
					expanded: true
				},
				
				proxy: {
					type: 'ajax',
					url: 'menu/querymenu',
					pageParam: 'pp',
					reader: {
						type: 'json'
					}
				},
				fields: [
					{name: 'objectid',type: 'int'},
					{name: 'chineseName',type: 'string'}
				]
				
			});
			
			
			var tree1 = Ext.create('Ext.tree.Panel', {
				title: '',
				width: 300,
				height: 440,
				displayField: 'chineseName',
				store: store2,
				renderTo: Ext.getBody()
			});
			
			Ext.create('Ext.Button',{
				width: 100,
				text: 'button1',
				renderTo: Ext.getBody(),
				handler: function(){
					
					store2.setProxy({
						type: 'ajax',
						url: 'menu/querymenu',
						extraParams: {
			                userId : '1',
			                sessionId : '0be9bb7d-d0c7-4051-b78b-eeb21eac048b'
			            },
						reader: {
							type: 'json'
						}
					});
					store2.load();
					//tree.expandAll();
				}
			});
			Ext.create('Ext.Button',{
				width: 100,
				text: 'button2',
				renderTo: Ext.getBody(),
				handler: function(){
					tree1.getRootNode().removeAll();
					store2.load();
				}
			});
		});
	</script>
</head>
<body></body>
</html>